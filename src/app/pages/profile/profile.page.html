<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Profile
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Profile</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-grid>
    <ion-row>
      <ion-col>

        <ion-card>

          <ion-item lines='none' class='avatar'>

            <ion-avatar>
              <img *ngIf='photoService.photos.length == 0' src="https://raw.githubusercontent.com/formacion-web/ionic-contacts/master/avatar.png" alt="">
              <ion-img *ngIf='photoService.photos.length > 0' [src]='photoService.photos[0].webviewPath'></ion-img>
            </ion-avatar>
            <ion-label>
              <h1>{{ userObservable?.nameÂ }}</h1>
              <p>{{ userObservable?.slugline }}</p>
            </ion-label>

            <ion-button fill='clear' (click)='update()' *ngIf='isLogged'>
              <ion-icon class='btn-small' name="settings-outline"></ion-icon>
              <ion-icon class='btn-small'name="log-in-outline"></ion-icon>
            </ion-button>

            <ion-button fill='clear' (click)='update()' *ngIf='!isLogged'>
              <ion-icon class='btn-small'name="log-in-outline"></ion-icon>
            </ion-button>


          </ion-item>

          <div class="metrics">

            <ion-item lines='none'>
              <ion-label>
                <span>{{ user?.seen.length }}</span>
                <h2 class="text-size-sm">Seen</h2>
              </ion-label>
            </ion-item>

            <ion-item lines='none'>
              <ion-label>
                <span>{{ user?.saved.length }}</span>
                <h2>Saved</h2>
              </ion-label>
            </ion-item>

            <ion-item lines='none'>
              <ion-label>
                <span>{{ user?.lists.length }}</span>
                <h2>Collections</h2>
              </ion-label>
            </ion-item>

          </div>

        </ion-card>

      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-segment (ionChange)='segmentChanged($event)' value='seen'>
          <ion-segment-button value='seen'>
            <ion-label>Movies seen</ion-label>
          </ion-segment-button>
          <ion-segment-button value='saved'>
            <ion-label>Movies saved</ion-label>
          </ion-segment-button>
          <ion-segment-button value='collections'>
            <ion-label>Collections</ion-label>
          </ion-segment-button>
        </ion-segment>
      </ion-col>
    </ion-row>

    <ion-row *ngIf="selector === 'seen'">
      <ion-col size='4' *ngFor='let movie of seen'>
        <ion-list>
          <app-movie-poster [movie]='movie' (click)='getDetails(movie)'></app-movie-poster>
        </ion-list>
      </ion-col>
    </ion-row>
  

  
    <ion-row *ngIf="selector === 'saved'">
      <ion-col size='4' *ngFor='let movie of saved'>
        <ion-list>
          <app-movie-poster [movie]='movie' (click)='getDetails(movie)'></app-movie-poster>
        </ion-list>
      </ion-col>
    </ion-row>
  
    <ion-row *ngIf="selector === 'collections'">
      <ion-col size='12' *ngFor='let collection of lists'>
        <app-collection (details)='getDetails($event)' [collection]='collection'></app-collection>
      </ion-col>
    </ion-row>

  </ion-grid>

  <!-- <ion-button (click)='presentModal()'>Login</ion-button>
  <ion-button (click)='logout()'>Logout</ion-button>
  <ion-button (click)='isLogged()'>Is logged</ion-button> -->

</ion-content>
